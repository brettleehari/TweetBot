graph TB
    %% Entry Points
    Start([ðŸš€ Application Start]) --> NPM{npm command}
    NPM -->|npm start| Server[ðŸ“¡ real-time-server.js]
    NPM -->|npm run start:dev| DevServer[ðŸ”§ enhanced-24x7-trading.ts]
    NPM -->|npm run start:production| ProdServer[ðŸ­ Production Mode]
    
    %% Server Initialization
    Server --> Init[ðŸ”§ Express App Initialization]
    Init --> Database[(ðŸ—„ï¸ SQLite Database)]
    Init --> StaticFiles[ðŸ“ Static File Serving]
    Init --> Middleware[ðŸ”’ CORS & JSON Middleware]
    
    %% Database Setup
    Database --> Schema[ðŸ“‹ database/schema.sql]
    Schema --> Tables{Database Tables}
    Tables --> Trades[(trades)]
    Tables --> Portfolio[(portfolio)]
    Tables --> MarketData[(market_data)]
    Tables --> AgentExec[(agent_executions)]
    Tables --> AgentDec[(agent_decisions)]
    Tables --> NewsAnalysis[(news_analysis)]
    
    %% Static File Routes
    StaticFiles --> PublicRoute[ðŸ“‚ /public â†’ public/index.html]
    StaticFiles --> DocsRoute[ðŸ“‚ /docs â†’ docs/]
    
    %% API Endpoints
    Server --> APIRoutes{ðŸ”— API Endpoints}
    APIRoutes --> BitcoinPrice[/api/bitcoin-price]
    APIRoutes --> BitcoinNews[/api/bitcoin-news]
    APIRoutes --> MarketAnalysis[/api/market-analysis]
    APIRoutes --> AgentStatus[/api/agent-status]
    APIRoutes --> Performance[/api/performance]
    APIRoutes --> Portfolio[/api/portfolio]
    APIRoutes --> AgentLogs[/api/agent-logs]
    APIRoutes --> TradeHistory[/api/trade-history]
    APIRoutes --> Health[/api/health]
    
    %% External Data Sources
    BitcoinPrice --> CoinGecko[ðŸŒ CoinGecko API]
    BitcoinNews --> NewsAPI[ðŸ“° NewsAPI]
    
    %% Frontend Entry
    PublicRoute --> Dashboard[ðŸ–¥ï¸ Bitcoin Trading Dashboard]
    Dashboard --> DOMLoaded[ðŸ“± DOMContentLoaded Event]
    
    %% Frontend Initialization
    DOMLoaded --> InitChart[ðŸ“Š Initialize Chart.js]
    DOMLoaded --> RefreshData[ðŸ”„ refreshAllData()]
    DOMLoaded --> SetInterval[â° 60-second refresh interval]
    
    %% Data Loading Functions
    RefreshData --> LoadPrice[ðŸ’° loadPriceData()]
    RefreshData --> LoadAgent[ðŸ¤– loadAgentStatus()]
    RefreshData --> LoadPortfolio[ðŸ’¼ loadPortfolioData()]
    RefreshData --> LoadPerformance[ðŸ“ˆ loadPerformanceData()]
    RefreshData --> LoadHistory[ðŸ“‹ loadDecisionHistory()]
    RefreshData --> LoadProgress[ðŸŽ¯ loadExecutionProgress()]
    
    %% API Calls from Frontend
    LoadPrice -->|fetch| BitcoinPrice
    LoadAgent -->|fetch| AgentStatus
    LoadPortfolio -->|fetch| Portfolio
    LoadPerformance -->|fetch| Performance
    LoadHistory -->|fetch| AgentLogs
    LoadProgress -->|fetch| APIRoutes
    
    %% Trading Scenarios Integration
    Dashboard --> TradingScenarios[ðŸŽ¯ Trading Scenarios Section]
    TradingScenarios --> TabNav[ðŸ§­ 6 Navigation Tabs]
    TabNav --> BullTab[ðŸ“ˆ Bull Market]
    TabNav --> BearTab[ðŸ“‰ Bear Market]
    TabNav --> RangeTab[ðŸŒŠ Range-Bound]
    TabNav --> RiskTab[ðŸ›¡ï¸ Risk Management]
    TabNav --> PositionTab[ðŸ“Š Position Sizing]
    TabNav --> PerfTab[ðŸ† Performance]
    
    %% Tab Functionality
    TabNav -->|onclick| ShowTab[ðŸ”„ showTab() function]
    ShowTab --> HideAll[ðŸ‘ï¸â€ðŸ—¨ï¸ Hide all content]
    ShowTab --> ShowSelected[âœ… Show selected tab]
    ShowTab --> UpdateNav[ðŸŽ¨ Update navigation styling]
    
    %% Real-time Updates
    SetInterval --> RefreshData
    RefreshData --> UpdateUI[ðŸ”„ Update Dashboard UI]
    UpdateUI --> PriceUpdate[ðŸ’° Price Display]
    UpdateUI --> PortfolioUpdate[ðŸ’¼ Portfolio Values]
    UpdateUI --> ChartUpdate[ðŸ“Š Portfolio Chart]
    UpdateUI --> AgentUpdate[ðŸ¤– Agent Status]
    
    %% Database Operations
    APIRoutes --> DBService[ðŸ”§ DatabaseService]
    DBService --> DBQueries[ðŸ“ SQL Queries]
    DBQueries --> SQLite[(ðŸ—„ï¸ SQLite Database)]
    
    %% Error Handling
    LoadPrice -->|error| ErrorPrice[âŒ Connection Error]
    LoadAgent -->|error| ErrorAgent[âŒ System Error]
    Server -->|error| ServerError[ðŸ’¥ Server Error]
    
    %% User Interactions
    Dashboard --> UserClick[ðŸ‘† User Interactions]
    UserClick --> TabClick[ðŸŽ¯ Tab Navigation]
    UserClick --> ButtonClick[ðŸ”˜ Control Buttons]
    ButtonClick --> DownloadTrades[ðŸ“¥ Download History]
    ButtonClick --> ExportPortfolio[ðŸ“¤ Export Portfolio]
    
    %% CSS Styling
    Dashboard --> Styling[ðŸŽ¨ CSS Styling]
    Styling --> GlassMorphism[âœ¨ Glass-morphism Effects]
    Styling --> Gradients[ðŸŒˆ Color Gradients]
    Styling --> Animations[ðŸŽ­ Hover & Transition Effects]
    Styling --> Responsive[ðŸ“± Mobile Responsive]
    
    %% Chart Integration
    InitChart --> ChartJS[ðŸ“Š Chart.js Library]
    ChartJS --> PortfolioChart[ðŸ“ˆ Portfolio Performance Chart]
    PortfolioChart --> GradientFill[ðŸŒˆ Gradient Fill]
    PortfolioChart --> RealTimeData[âš¡ Real-time Data Points]

    %% Color coding
    classDef entryPoint fill:#2ecc71,stroke:#27ae60,stroke-width:3px,color:#fff
    classDef server fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    classDef database fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
    classDef api fill:#e67e22,stroke:#d35400,stroke-width:2px,color:#fff
    classDef frontend fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
    classDef external fill:#95a5a6,stroke:#7f8c8d,stroke-width:2px,color:#fff
    classDef error fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
    
    class Start,NPM entryPoint
    class Server,DevServer,ProdServer,Init server
    class Database,Schema,Tables,Trades,Portfolio,MarketData,AgentExec,AgentDec,NewsAnalysis,SQLite database
    class APIRoutes,BitcoinPrice,BitcoinNews,MarketAnalysis,AgentStatus,Performance,Portfolio,AgentLogs,TradeHistory,Health api
    class Dashboard,DOMLoaded,TradingScenarios,TabNav,RefreshData,LoadPrice,LoadAgent,LoadPortfolio,LoadPerformance,LoadHistory frontend
    class CoinGecko,NewsAPI external
    class ErrorPrice,ErrorAgent,ServerError error