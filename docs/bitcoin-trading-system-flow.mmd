graph TD
    subgraph ğŸ§  True Agentic Orchestrator Process
        direction LR
        OrchestratorStart([ğŸš€ Start true-agentic-orchestrator.js]) --> OrchestratorInit[âš™ï¸ Initialize Orchestrator]
        OrchestratorInit --> AgentCreation[ğŸ¤– Create Agentic Agents]
        OrchestratorInit --> DBConnect1[(ï¿½ï¸)]
        
        OrchestratorInit --> StrategicCycles{â° Strategic Orchestration Cycles}
        StrategicCycles --> AssessState[ï¿½ Assess System State]
        AssessState --> ExternalAPIs[ğŸŒ Fetch External Data]
        ExternalAPIs --> CoinGecko[ï¿½ CoinGecko Price]
        
        AssessState --> MakeDecisions[ğŸ§  Make Strategic Decisions]
        MakeDecisions --> ExpertMethodology[ğŸ† Use BTC Expert Methodology]
        MakeDecisions --> LogToDB[ğŸ“ Write to Database]
        
        LogToDB --> DB_Portfolio_Write([fa:fa-edit Portfolio])
        LogToDB --> DB_Trades_Write([fa:fa-edit Trades])
        LogTogether with a descriptive commit message.
        LogToDB --> DB_History_Write([fa:fa-edit History])
        LogToDB --> DB_Logs_Write([fa:fa-edit Agent Logs])
    end

    subgraph ğŸŒ Web Server & API Process
        direction LR
        ServerStart([ï¿½ Start real-time-server.js]) --> ExpressInit[ï¿½ Initialize Express Server]
        ExpressInit --> StaticServing[ğŸ“ Serve Static Dashboard]
        ExpressInit --> APIEndpoints[ğŸ”Œ Define API Endpoints]
        ExpressInit --> DBConnect2[(ğŸ—„ï¸)]

        APIEndpoints --> API_Portfolio["/api/portfolio"]
        APIEndpoints --> API_Performance["/api/performance"]
        APIEndpoints --> API_AgentStatus["/api/agent-status"]
        APIEndpoints --> API_TradeHistory["/api/trade-history"]
        
        API_Portfolio --> DB_Portfolio_Read([fa:fa-book-open Portfolio])
        API_Performance --> DB_History_Read([fa:fa-book-open History])
        API_AgentStatus --> DB_Logs_Read([fa:fa-book-open Agent Logs])
        API_TradeHistory --> DB_Trades_Read([fa:fa-book-open Trades])
    end

    subgraph ï¿½ï¸ Central Database [Single Source of Truth]
        direction TB
        style CentralDatabase fill:#f0f4f8,stroke:#b0c4de
        Database[(trading.db)]
    end
    
    subgraph ï¿½ï¸ User Dashboard
        direction TB
        User([ï¿½ User]) --> Dashboard[ğŸ“Š View Dashboard]
        Dashboard --> Call_API_Portfolio["Request Portfolio"]
        Dashboard --> Call_API_Performance["Request Performance"]
        Dashboard --> Call_API_AgentStatus["Request Agent Status"]
    end

    %% Connections
    DBConnect1 --> Database
    DBConnect2 --> Database
    
    LogToDB -- writes to --> Database
    
    DB_Portfolio_Read --> API_Portfolio
    DB_History_Read --> API_Performance
    DB_Logs_Read --> API_AgentStatus
    DB_Trades_Read --> API_TradeHistory

    Call_API_Portfolio --> API_Portfolio
    Call_API_Performance --> API_Performance
    Call_API_AgentStatus --> API_AgentStatus

    %% Styling
    classDef process fill:#e6f0ff,stroke:#99c2ff,stroke-width:2px
    classDef database fill:#fff0e6,stroke:#ffc299,stroke-width:2px
    classDef user fill:#e6ffe6,stroke:#99ff99,stroke-width:2px
    classDef entry fill:#d1e0e0,stroke:#85adad,stroke-width:2px,font-weight:bold

    class OrchestratorStart,ServerStart entry
    class "ğŸ§  True Agentic Orchestrator Process" process
    class "ğŸŒ Web Server & API Process" process
    class "ğŸ—„ï¸ Central Database [Single Source of Truth]" database
    class "ğŸ–¥ï¸ User Dashboard" user
